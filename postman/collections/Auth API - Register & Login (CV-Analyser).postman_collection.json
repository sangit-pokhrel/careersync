{
  "info": {
    "_postman_id": "2155037e-83c0-47fc-b93b-253976a74dc5",
    "name": "Auth API - Register & Login (CV-Analyser)",
    "description": "Postman collection for /api/v1/auth register and login endpoints with sample payloads.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "id": "389f12dd-77a9-48ff-a37e-4323a5d4af89",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"StrongPass123\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"role\": \"job_seeker\"\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "id": "07fd3115-365c-4332-8c2d-35ba3b8b9c3a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n \"email\": \"admin@example.com\",\n  \"password\": \"admin123\"\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Refresh",
          "id": "984625d1-f50c-4d2a-bea8-2b8db76d99e9",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n \"email\": \"testuser@example.com\",\n  \"password\": \"StrongPass123\"\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "refresh"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "id": "5961bac8-3c30-4799-ad58-bfc97d21dc0a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n \"email\": \"testuser@example.com\",\n  \"password\": \"StrongPass123\"\n}\n"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "auth",
                "logout"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "bc55adbd-439e-40f8-a199-34675466ca3e"
    },
    {
      "name": "User Profille",
      "item": [
        {
          "name": "Get/Put My Profile",
          "id": "de0fb639-4c3b-481e-aa28-59f378b109ff",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me"
              ]
            }
          },
          "response": []
        },
        {
          "name": "As admin listing users",
          "id": "0b24a1f9-05af-4f41-8cbf-b7ab73e97169",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        },
        {
          "name": "As Admin get User by Id",
          "id": "fe034321-e50e-45dc-840e-a607dc9e3dd9",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        },
        {
          "name": "As user change pass",
          "id": "1ee3b94d-c001-4029-a6ae-b62b47318917",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"currentPassword\": \"StrongPass123\",\r\n    \"newPassword\": \"WeakPass321\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/me/change-password",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "change-password"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Deactivate",
          "id": "9b5a1b5f-4ead-4a59-b189-e6c38c661be5",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me/delete",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "delete"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete",
          "id": "2b3f2dbd-7800-4b3a-ab8e-c5dbbd2dd185",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/me/delete",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "me",
                "delete"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create user",
          "id": "9570c6e2-5563-4b44-b7b7-48401937670b",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"email\": \"john.seeker@example.com\",\r\n  \"password\": \"SecurePass123!\",\r\n  \"firstName\": \"John\",\r\n  \"lastName\": \"Seeker\",\r\n  \"role\": \"job_seeker\",\r\n  \"status\": \"active\",\r\n  \"headline\": \"Senior Software Engineer\",\r\n  \"location\": \"New York, NY\",\r\n  \"skills\": [\"JavaScript\", \"React\", \"Node.js\", \"MongoDB\"],\r\n  \"resumeUrl\": \"https://example.com/resumes/john-seeker.pdf\",\r\n  \"isEmailVerified\": true\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/users/create",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "create"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "0ea9bf1c-8ba6-4ddc-91f4-fd7619494e48"
    },
    {
      "name": "Ticket",
      "item": [
        {
          "name": "Create Ticket",
          "id": "36e0e477-2141-4233-bbb4-4b092a5368af",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"subject\": \"Contact Form Not Working\",\r\n  \"description\": \"Every time I upload a file it shows 500.\",\r\n  \"category\": \"technical\",\r\n  \"priority\": \"low\",\r\n  \"attachmentUrl\": \"https://example.com/screenshot.png\"\r\n}\r\n",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/support/tickets",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "support",
                "tickets"
              ]
            }
          },
          "response": []
        },
        {
          "name": "As user i wanna get all my tickets",
          "id": "dfd4b264-e5d9-4c2a-9428-794fcf430bc9",
          "request": {
            "method": "GET",
            "header": []
          },
          "response": []
        }
      ],
      "id": "cb4a801e-c03b-4784-958a-7b3a50a673e8"
    },
    {
      "name": "Contact",
      "item": [
        {
          "name": "Create Contact",
          "id": "97aefa08-2a20-4bf3-923d-49ad686a19b6",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"name\": \"Jane Doe\",\r\n  \"email\": \"admin@example.com\",\r\n  \"phone\": \"+15551234567\",\r\n  \"subject\": \"Inquiry about your service plans\",\r\n  \"message\": \"I am interested in learning more about your enterprise-level service options. Could someone contact me soon?\",\r\n  \"inquiryType\": \"sales\",\r\n  \"attachmentUrl\": \"https://example.com/some-optional-file.pdf\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/contact",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contact"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Contact",
          "id": "e1b04278-9fbf-45f3-a6a0-55e3d9e0a928",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"name\": \"Jane Doe\",\r\n  \"email\": \"admin@example.com\",\r\n  \"phone\": \"+15551234567\",\r\n  \"subject\": \"Inquiry about your service plans\",\r\n  \"message\": \"I am interested in learning more about your enterprise-level service options. Could someone contact me soon?\",\r\n  \"inquiryType\": \"sales\",\r\n  \"attachmentUrl\": \"https://example.com/some-optional-file.pdf\"\r\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contact/",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contact",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update the Inquiry",
          "id": "03630a4b-54af-4dc8-be0b-026ed5e9006d",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"name\": \"Jane Go Low\",\r\n  \"email\": \"admin@example.com\",\r\n  \"phone\": \"+15551234567\",\r\n  \"subject\": \"Inquiry about your service plans\",\r\n  \"message\": \"I am interested in learning more about your enterprise-level service options. Could someone contact me soon?\",\r\n  \"inquiryType\": \"sales\",\r\n  \"attachmentUrl\": \"https://example.com/some-optional-file.pdf\"\r\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/contact/693a28a4d1b1eb25e01b8dc9",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contact",
                "693a28a4d1b1eb25e01b8dc9"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Certain Contact",
          "id": "6e3e8f18-75d2-400f-98dd-8297239ba492",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"name\": \"Jane Doe\",\r\n  \"email\": \"admin@example.com\",\r\n  \"phone\": \"+15551234567\",\r\n  \"subject\": \"Inquiry about your service plans\",\r\n  \"message\": \"I am interested in learning more about your enterprise-level service options. Could someone contact me soon?\",\r\n  \"inquiryType\": \"sales\",\r\n  \"attachmentUrl\": \"https://example.com/some-optional-file.pdf\"\r\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contact/693a28a4d1b1eb25e01b8dc9",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contact",
                "693a28a4d1b1eb25e01b8dc9"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete All",
          "id": "546ea169-2680-4b6a-9009-713724d94c06",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"name\": \"Jane Doe\",\r\n  \"email\": \"admin@example.com\",\r\n  \"phone\": \"+15551234567\",\r\n  \"subject\": \"Inquiry about your service plans\",\r\n  \"message\": \"I am interested in learning more about your enterprise-level service options. Could someone contact me soon?\",\r\n  \"inquiryType\": \"sales\",\r\n  \"attachmentUrl\": \"https://example.com/some-optional-file.pdf\"\r\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/contact/all",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "contact",
                "all"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "a91802de-ea72-4146-b685-4fc325ae6075"
    },
    {
      "name": "CV Analysis",
      "item": [
        {
          "name": "Upload & Analyze CV",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 202) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('analysis_id', jsonData.analysisId);",
                  "}"
                ],
                "type": "text/javascript",
                "id": "9f058686-4ac4-4e83-9dbd-4a6e4a0bd1d3"
              }
            }
          ],
          "id": "c969cdce-f1a4-4de2-881b-5f50e828a632",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "cv",
                  "type": "file",
                  "src": "/path/to/your/cv.pdf"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/cv/analyze",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "analyze"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Analyze CV from URL",
          "id": "a80ed9a9-9506-4bdd-a8b6-83d6c6245c74",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"cvUrl\": \"https://example.com/sample-cv.pdf\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/cv/analyze",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "analyze"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Analysis Status",
          "id": "f5243a25-aa8a-48c6-86cf-52dd1bc49686",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cv/analyses/{{analysis_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "analyses",
                "{{analysis_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Latest Analysis",
          "id": "8eb14bc0-1ab9-4ef3-82c8-381f951d8016",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cv/analyses/latest",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "analyses",
                "latest"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List My Analyses",
          "id": "f57b2b12-73c3-4056-893e-74ece6cde289",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cv/analyses",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "analyses"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List All Analyses (Admin)",
          "id": "50254a18-10ad-47ee-b8c3-3a64e4a23d28",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cv/admin/analyses?page=1&limit=20&status=done",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "admin",
                "analyses"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "done"
                },
                {
                  "key": "userId",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Analysis (Admin) Copy",
          "id": "f786fb5c-730a-4d40-badf-f373a6ca08c5",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"done\",\n  \"overallScore\": 90,\n  \"strengths\": [\"Excellent technical skills\", \"Strong communication\"],\n  \"weaknesses\": [\"Could add more certifications\"],\n  \"recommendations\": [\"Consider adding AWS certification\"],\n  \"skillsDetected\": [\"JavaScript\", \"React\", \"Node.js\", \"MongoDB\", \"Docker\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/cv/admin/analyses/{{analysis_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "admin",
                "analyses",
                "{{analysis_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Analysis (Admin) Copy",
          "id": "d36900e3-fd82-4c39-a2cb-3e4d2a68746e",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/cv/admin/analyses/{{analysis_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "cv",
                "admin",
                "analyses",
                "{{analysis_id}}"
              ]
            },
            "description": "Also deletes related job matches"
          },
          "response": []
        }
      ],
      "id": "28310cca-82e1-44c6-91f1-d794ad465d9b"
    },
    {
      "name": "Jobs",
      "item": [
        {
          "name": "Create Manual Job (Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "5d0f9cb9-c83b-4c4b-aef8-41b420eb53a7",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('job_id', jsonData.job._id);",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "4dfaca0a-ca70-4553-96e8-1416d6f7fd9c",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{login_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Senior Full Stack Developer\",\n  \"companyName\": \"TechCorp Inc\",\n  \"description\": \"We are looking for an experienced Full Stack Developer to join our team.\",\n  \"location\": \"Kathmandu, Nepal\",\n  \"jobType\": \"full-time\",\n  \"salaryMin\": 80000,\n  \"salaryMax\": 120000,\n  \"experienceLevel\": \"senior\",\n  \"requiredSkills\": [\"JavaScript\", \"React\", \"Node.js\", \"MongoDB\", \"TypeScript\"],\n  \"jobSource\": \"manual\",\n  \"applicationMethod\": \"internal\",\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/jobs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Create External Job (Admin)",
          "id": "f254539c-951c-4db3-b83c-2b9fb4ce1b43",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Frontend Developer\",\n  \"companyName\": \"StartupXYZ\",\n  \"description\": \"Join our innovative team as a Frontend Developer.\",\n  \"location\": \"Remote\",\n  \"jobType\": \"remote\",\n  \"salaryMin\": 60000,\n  \"salaryMax\": 90000,\n  \"experienceLevel\": \"mid\",\n  \"requiredSkills\": [\"React\", \"CSS\", \"JavaScript\", \"HTML\"],\n  \"jobSource\": \"linkedin\",\n  \"externalUrl\": \"https://linkedin.com/jobs/123456\",\n  \"externalId\": \"linkedin-123456\",\n  \"applicationMethod\": \"external_redirect\",\n  \"status\": \"active\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/jobs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs"
              ]
            }
          },
          "response": []
        },
        {
          "name": "List All Jobs",
          "id": "411ba85f-8810-477b-b12a-4117c779a3a7",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/jobs?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search Jobs",
          "id": "556418a9-50ff-40de-ba13-3c1a7fd60aae",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/jobs?q=developer&location=kathmandu&type=full-time&experienceLevel=senior",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "developer"
                },
                {
                  "key": "location",
                  "value": "kathmandu"
                },
                {
                  "key": "type",
                  "value": "full-time"
                },
                {
                  "key": "experienceLevel",
                  "value": "senior"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Job Details",
          "id": "1edbc92f-f333-4dc9-a416-78147267b6be",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs",
                "{{job_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Recommendations",
          "id": "e6ebd4b7-d47d-4f39-9d8f-d50f43f067c3",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/recommendations?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs",
                "recommendations"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Job",
          "id": "c63f6b16-1edb-4bd3-9e5e-0705b14859ef",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Senior Full Stack Developer (Updated)\",\n  \"salaryMin\": 90000,\n  \"salaryMax\": 130000\n}"
            },
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs",
                "{{job_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Job",
          "id": "b8f586d5-e8c1-4908-8b3a-be42cb4097ea",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "jobs",
                "{{job_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "0e4f65f4-fecd-4723-ad36-7def434b6f5a"
    },
    {
      "name": "Applications",
      "item": [
        {
          "name": "Apply to Internal Job",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.application && response.application._id) {",
                  "        pm.collectionVariables.set('application_id', response.application._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "1c6c4eb5-741a-427d-83e5-45da44e171ff"
              }
            }
          ],
          "id": "8a5475db-03c5-49e1-897d-c65d8eb85c1a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jobId\": \"{{job_id}}\",\n  \"coverLetter\": \"I am very interested in this position. My experience in React and Node.js makes me a great fit for this role. I have successfully delivered multiple full-stack applications and am excited about the opportunity to contribute to your team.\",\n  \"resumeUrl\": \"https://res.cloudinary.com/your-cloud/raw/upload/resume.pdf\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/applications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Apply to External Job",
          "id": "9f063f69-00a2-49e0-b57e-1cd625568c16",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"jobId\": \"{{job_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/applications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications"
              ]
            },
            "description": "Returns redirect URL for external application"
          },
          "response": []
        },
        {
          "name": "List My Applications",
          "id": "be5f50fb-afd3-46e2-b93a-872d311366e7",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/my-applications?page=1&limit=20&status=pending",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "my-applications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "pending",
                  "description": "pending, under_review, accepted, rejected, interview_scheduled"
                },
                {
                  "key": "applicationType",
                  "value": "internal",
                  "description": "internal, external_redirect",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Application by ID",
          "id": "223f63c1-dcb1-4391-b43b-757b7aef3194",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/{{application_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "{{application_id}}"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Withdraw Application (Pending Only)",
          "id": "61f7ba26-7866-459e-8735-0226e0e06aba",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/{{application_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "{{application_id}}"
              ]
            },
            "description": "Only works if status is 'pending'"
          },
          "response": []
        },
        {
          "name": "List Job Applications (Employer)",
          "id": "141fc53f-7ce7-4332-9013-3bb56a8484d4",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{employer_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/job/{{job_id}}/applications?page=1&limit=20&status=pending",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "job",
                "{{job_id}}",
                "applications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "pending"
                }
              ]
            },
            "description": "View all applications for your job posting"
          },
          "response": []
        },
        {
          "name": "Update Application Status (Employer)",
          "id": "dee2457a-2c2a-49ee-8339-9539fa83623c",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{employer_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"under_review\",\n  \"notes\": \"Candidate looks promising. Scheduling interview for next week.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/applications/{{application_id}}/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "{{application_id}}",
                "status"
              ]
            },
            "description": "Valid statuses: pending, under_review, accepted, rejected, interview_scheduled"
          },
          "response": []
        },
        {
          "name": "List All Applications (Admin)",
          "id": "e44bde4f-1bf3-4813-b7f9-ebe041edc097",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/admin/all?page=1&limit=20&status=pending",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "admin",
                "all"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "pending"
                },
                {
                  "key": "applicationType",
                  "value": "internal",
                  "disabled": true
                },
                {
                  "key": "userId",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "jobId",
                  "value": "",
                  "disabled": true
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Application (Admin)",
          "id": "cb982ce9-c94b-43df-a55e-69b0dc6ca547",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/applications/admin/{{application_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "applications",
                "admin",
                "{{application_id}}"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "b52ea5dc-0ff4-4e38-b313-e99d4f49b6ba"
    },
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Server Health",
          "id": "2c0ff55b-ef27-4054-9170-6b4a528a2d21",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "http://localhost:5000/health",
              "protocol": "http",
              "host": [
                "localhost"
              ],
              "port": "5000",
              "path": [
                "health"
              ]
            }
          },
          "response": []
        }
      ],
      "id": "4943e878-cba5-433e-a42f-f03722921700"
    },
    {
      "name": "User - Create & Manage Tickets Copy",
      "item": [
        {
          "name": "Create Ticket - CV Upload Issue",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.ticket && response.ticket._id) {",
                  "        pm.collectionVariables.set('ticket_id', response.ticket._id);",
                  "        console.log('‚úÖ Ticket created:', response.ticket.ticketNumber);",
                  "        console.log('üìß Check emails:');",
                  "        console.log('   - User confirmation');",
                  "        console.log('   - All agents notified');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "id": "b53d685b-8e04-4f0b-ba1a-7b13a5c00ac7"
              }
            }
          ],
          "id": "c8b8178f-6826-4e64-88ed-1b3d1216e0d7",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subject\": \"Unable to upload my CV - Getting Error 500\",\n  \"description\": \"Hi, I'm trying to upload my CV but I keep getting a server error (Error 500). I've tried different PDF files but the same issue persists. This is blocking me from applying to jobs. Please help!\",\n  \"category\": \"technical\",\n  \"priority\": \"high\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets"
              ]
            },
            "description": "‚úâÔ∏è **Emails Sent:**\n1. User confirmation\n2. Notification to all agents (Sarah, Mike, Emma)\n\nüìã **Ticket Status:** open ‚Üí pending_assignment"
          },
          "response": []
        },
        {
          "name": "Create Ticket - Account Issue",
          "id": "6a82cd40-9256-4c10-b367-7f71ca9ee6ae",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user2_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subject\": \"Cannot reset my password\",\n  \"description\": \"I tried to reset my password but didn't receive the reset email. Checked spam folder as well.\",\n  \"category\": \"account\",\n  \"priority\": \"medium\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets"
              ]
            },
            "description": "Create ticket from different user"
          },
          "response": []
        },
        {
          "name": "List My Tickets",
          "id": "db220788-6fef-47b7-8801-ae628e21609a",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/tickets?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "open",
                  "disabled": true
                },
                {
                  "key": "priority",
                  "value": "high",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "technical",
                  "disabled": true
                }
              ]
            },
            "description": "Get all tickets created by current user"
          },
          "response": []
        },
        {
          "name": "Get Ticket Details",
          "id": "29a58e24-94cc-46a4-86e6-d6f6d22cddc7",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}"
              ]
            },
            "description": "Shows ticket + all messages (cached)"
          },
          "response": []
        },
        {
          "name": "Add Message (Text Only)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    console.log('‚úÖ Message added');",
                  "    console.log('üìß Email sent to assigned agent(s)');",
                  "}"
                ],
                "type": "text/javascript",
                "id": "2a6e005f-0a6a-4565-bcd5-f23d336e79d5"
              }
            }
          ],
          "id": "616d3ba8-277a-4b76-a377-2003c4cda5a7",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"I've also tried clearing my browser cache and using incognito mode, but still getting the same 500 error. The error appears right after selecting the file.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "messages"
              ]
            },
            "description": "‚úâÔ∏è Sends email to assigned agent(s)"
          },
          "response": []
        },
        {
          "name": "Add Message with Attachments",
          "id": "2e9e9a92-46a9-4ce5-8b1a-a3868b35d4b5",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "message",
                  "value": "Here's a screenshot of the error message I'm getting",
                  "type": "text"
                },
                {
                  "key": "attachments",
                  "description": "Select image or PDF (max 5 files, 10MB each)",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "messages"
              ]
            },
            "description": "üìé Upload files with message\n‚úâÔ∏è Email includes download links"
          },
          "response": []
        },
        {
          "name": "Rate Ticket - 5 Stars",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚≠ê Ticket rated:', response.ticket.rating, 'stars');",
                  "    console.log('üë§ Agent:', response.agent.firstName, response.agent.lastName);",
                  "    console.log('üìä Agent avg rating:', response.agent.averageRating);",
                  "    console.log('üìà Total ratings:', response.agent.totalRatings);",
                  "}"
                ],
                "type": "text/javascript",
                "id": "66203354-378e-4d48-bcd2-bec290ac7280"
              }
            }
          ],
          "id": "82d8163b-a746-4d67-8209-76d831ca5087",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5,\n  \"feedback\": \"Excellent support! Sarah was very helpful and resolved my issue quickly. She explained the problem clearly and the fix worked perfectly. Highly recommend!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/rate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "rate"
              ]
            },
            "description": "‚≠ê **Rate Primary Agent (1-5 stars)**\n\n‚úÖ Updates agent's profile:\n- Adds rating to agent.agentRatings[]\n- Recalculates agent.averageRating\n- Increments agent.totalRatings\n\n‚ö†Ô∏è Can only rate resolved/closed tickets\n‚ö†Ô∏è Can only rate once per ticket"
          },
          "response": []
        },
        {
          "name": "Rate Ticket - 4 Stars",
          "id": "ccd03bde-4117-41b9-beb7-19735718d8ac",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 4,\n  \"feedback\": \"Good service. Issue resolved but took a bit longer than expected.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/rate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "rate"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Rate Ticket - 3 Stars",
          "id": "0850ec71-1dd0-4efa-9299-77db93163ddb",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 3,\n  \"feedback\": \"Issue eventually fixed but communication could be better.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/rate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "rate"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Reopen Ticket",
          "id": "aa43932e-3d28-49cb-8941-8c562b67fd8c",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{user_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"The issue came back. Getting the same 500 error again when uploading CV.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/reopen",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "reopen"
              ]
            },
            "description": "Reopens closed ticket. Increments reopenedCount."
          },
          "response": []
        }
      ],
      "id": "df199d35-3500-4ee0-a2f9-3ce5a89b3067",
      "description": "User ticket management and rating system"
    },
    {
      "name": "Multi-Agent - Accept/Decline Copy",
      "item": [
        {
          "name": "List Pending Tickets (Agent 1)",
          "id": "8b8ec3ce-f9d7-4aa3-b6da-9e17587ce404",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/pending-my-response?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "pending-my-response"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Shows tickets where this agent is in pendingAgents[] list"
          },
          "response": []
        },
        {
          "name": "Accept Ticket (Agent 1 - Becomes Primary)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ Ticket accepted');",
                  "    console.log('üë§ Role:', response.role);",
                  "    console.log('üìß Email sent to customer');",
                  "}"
                ],
                "type": "text/javascript",
                "id": "bc6848d9-8685-4649-9b4a-847c28dc6eb8"
              }
            }
          ],
          "id": "5af11683-147c-4c05-9f3f-8f9bba19e911",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}/accept",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}",
                "accept"
              ]
            },
            "description": "‚úÖ **First agent to accept becomes PRIMARY**\n\nüìß Email sent to customer:\n\"Agent Sarah has been assigned to your ticket\"\n\nüìä Status: pending_assignment ‚Üí in_progress\n\nüë§ Agent added to assignedAgents[] with:\n- status: 'accepted'\n- role: 'primary'"
          },
          "response": []
        },
        {
          "name": "Accept Ticket (Agent 2 - Becomes Collaborator)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ Ticket accepted as collaborator');",
                  "    console.log('üë• Multiple agents on ticket now');",
                  "}"
                ],
                "type": "text/javascript",
                "id": "d0ae5e03-ccae-4f76-b244-c82e392b01d0"
              }
            }
          ],
          "id": "ec997302-4536-48c5-9c14-cb058d7fc1f5",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{agent2_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}/accept",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}",
                "accept"
              ]
            },
            "description": "‚úÖ **Additional agents become COLLABORATORS**\n\nüë• Allows multiple agents to work together\n\nüìä Agent added to assignedAgents[] with:\n- status: 'accepted'\n- role: 'collaborator'"
          },
          "response": []
        },
        {
          "name": "Decline Ticket (Agent)",
          "id": "648782eb-ce74-4388-96d1-92b8b2edaf80",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{sales_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}/decline",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}",
                "decline"
              ]
            },
            "description": "‚ùå Agent declines ticket\n\n- Removed from pendingAgents[]\n- Added to assignedAgents[] with status 'declined'\n- No email sent"
          },
          "response": []
        }
      ],
      "id": "44f43c0e-7682-4535-a395-bbe45d35cc11",
      "description": "Multi-agent assignment workflow"
    },
    {
      "name": "Staff - Manage All Tickets Copy",
      "item": [
        {
          "name": "List All Tickets",
          "id": "29595fe0-1099-4e8f-a113-8d8c4953d177",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/tickets?page=1&limit=20&status=in_progress",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "in_progress"
                },
                {
                  "key": "priority",
                  "value": "urgent",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "technical",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "TKT-000001",
                  "description": "Search by ticket number or subject",
                  "disabled": true
                }
              ]
            },
            "description": "View all tickets with filters"
          },
          "response": []
        },
        {
          "name": "Get Statistics (Global)",
          "id": "aa73b466-405f-4f71-89fd-16dcaa8a452c",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/stats",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "stats"
              ]
            },
            "description": "üìä Returns:\n- Tickets by status\n- Tickets by priority\n- Tickets by category\n- Avg response time\n- Avg resolution time\n- Avg rating"
          },
          "response": []
        },
        {
          "name": "Update Ticket Status/Priority",
          "id": "e5f2d269-2897-4a78-bd6a-3f11c1c7d1fe",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"waiting_customer\",\n  \"priority\": \"urgent\",\n  \"tags\": [\"cv-upload\", \"bug\", \"server-error\"],\n  \"internalNotes\": \"Checked server logs. Found CORS issue in upload API. Deploying fix now. ETA: 10 mins.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}"
              ]
            },
            "description": "Update ticket properties (staff only)"
          },
          "response": []
        },
        {
          "name": "Add Internal Note (Staff Only)",
          "id": "fd6de4c9-99f8-43ad-97d2-39fd20ab5800",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Checked backend logs. Found CORS issue in CV upload endpoint. Deploying fix. Customer should not see this note.\",\n  \"isInternal\": \"true\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "messages"
              ]
            },
            "description": "üîí Internal notes:\n- NOT visible to customer\n- NOT sent via email\n- Only visible to staff"
          },
          "response": []
        },
        {
          "name": "Reply to Customer (Agent)",
          "id": "550021b6-8561-4adf-a7de-c1c7731bad2a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"message\": \"Hi John! I've identified the issue. It was a CORS configuration problem on our server. I've deployed a fix just now. Can you please try uploading your CV again and let me know if it works? Thanks!\",\n  \"status\": \"waiting_customer\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/tickets/{{ticket_id}}/messages",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "tickets",
                "{{ticket_id}}",
                "messages"
              ]
            },
            "description": "‚úâÔ∏è Sends email to customer with agent's reply"
          },
          "response": []
        },
        {
          "name": "Resolve Ticket",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ Ticket resolved');",
                  "    console.log('üìß Email sent to customer with satisfaction survey');",
                  "}"
                ],
                "type": "text/javascript",
                "id": "33cbea9d-7324-44ec-a647-1bb385a9f4b0"
              }
            }
          ],
          "id": "6c5f30db-5b33-40a7-a253-87904a974e22",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"resolved\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}"
              ]
            },
            "description": "‚úÖ Marks ticket as resolved\n\n‚úâÔ∏è **Email sent to customer with:**\n- Ticket summary\n- Satisfaction survey (rate 1-5 stars)\n- Option to reopen\n\nüìä Calculates:\n- resolutionTime\n- Sets resolvedAt timestamp"
          },
          "response": []
        },
        {
          "name": "Manual Assign to Agent (Admin)",
          "id": "f07491ba-4be2-45ba-83e9-960b6aa7fe1a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"agentEmail\": \"sarah@company.com\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}/assign",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}",
                "assign"
              ]
            },
            "description": "Admin can manually assign without agent acceptance"
          },
          "response": []
        },
        {
          "name": "Bulk Update Tickets",
          "id": "b25ccbe4-e3ec-4c6c-afcb-a1cc76405c6b",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ticketIds\": [\"{{ticket_id}}\"],\n  \"updates\": {\n    \"status\": \"resolved\",\n    \"priority\": \"low\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/bulk-update",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "bulk-update"
              ]
            },
            "description": "Update multiple tickets at once"
          },
          "response": []
        },
        {
          "name": "Delete Ticket (Admin Only)",
          "id": "542f45de-c7d2-4b5a-a9af-40ee055f2b20",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/tickets/{{ticket_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "tickets",
                "{{ticket_id}}"
              ]
            },
            "description": "‚ö†Ô∏è Deletes ticket + all messages permanently"
          },
          "response": []
        }
      ],
      "id": "5460b042-75f8-4d29-9d0f-e2ff4e9719b1",
      "description": "Staff ticket management"
    },
    {
      "name": "Agent Management & Ratings Copy",
      "item": [
        {
          "name": "List All Agents (with Stats)",
          "id": "e1aa6984-1a72-4683-8d38-a77a52fce1ec",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "role",
                  "value": "csr",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "active",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "sarah",
                  "disabled": true
                }
              ]
            },
            "description": "üìä Shows all agents with:\n- Total tickets assigned\n- Open/In Progress/Resolved counts\n- Average rating ‚≠ê\n- Total ratings received"
          },
          "response": []
        },
        {
          "name": "Search Agents (Autocomplete)",
          "id": "9bde32a7-d9a2-41aa-bfc1-ec8ad960941e",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{csr_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/search?q=sarah",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "search"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "sarah",
                  "description": "Min 2 characters"
                }
              ]
            },
            "description": "Quick search by email/name (for assignment)"
          },
          "response": []
        },
        {
          "name": "Get Agent Details (Full Profile)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üë§ Agent:', response.agent.firstName, response.agent.lastName);",
                  "    console.log('‚≠ê Average Rating:', response.ratings.average);",
                  "    console.log('üìä Total Ratings:', response.ratings.total);",
                  "    console.log('üìà Breakdown:');",
                  "    console.log('   5‚≠ê:', response.ratings.breakdown['5']);",
                  "    console.log('   4‚≠ê:', response.ratings.breakdown['4']);",
                  "    console.log('   3‚≠ê:', response.ratings.breakdown['3']);",
                  "    console.log('   2‚≠ê:', response.ratings.breakdown['2']);",
                  "    console.log('   1‚≠ê:', response.ratings.breakdown['1']);",
                  "}"
                ],
                "type": "text/javascript",
                "id": "d571c359-f48d-4158-82f9-0c0070205bc0"
              }
            }
          ],
          "id": "954d38f0-0cd9-4fa7-9cdf-df37c7d60506",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/{{agent_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "{{agent_id}}"
              ]
            },
            "description": "üìä **Complete Agent Profile:**\n\n**Ticket Stats:**\n- By status (open, in_progress, resolved)\n- By priority (low, medium, high, urgent)\n- By category\n- Avg response time\n- Avg resolution time\n\n**‚≠ê Rating Stats:**\n- Average rating (1-5)\n- Total ratings received\n- Breakdown (5‚≠ê, 4‚≠ê, 3‚≠ê, 2‚≠ê, 1‚≠ê)\n- Last 10 ratings with:\n  - Rating value\n  - Customer feedback\n  - Ticket number\n  - Date rated\n\n**Recent Tickets:**\n- Last 10 tickets handled"
          },
          "response": []
        },
        {
          "name": "Get Agent Reviews (Paginated)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìù Total Reviews:', response.meta.total);",
                  "    console.log('‚≠ê Agent Rating:', response.agent.averageRating);",
                  "    response.reviews.forEach((review, i) => {",
                  "        console.log(`${i+1}. ${review.rating}‚≠ê - ${review.feedback}`);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "id": "cdfa76fa-0363-4c5f-bb58-9431701c77d9"
              }
            }
          ],
          "id": "994d8dfb-4fce-445c-a0f4-c47f4615ee8a",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/{{agent_id}}/reviews?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "{{agent_id}}",
                "reviews"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "rating",
                  "value": "5",
                  "description": "Filter: 1, 2, 3, 4, or 5",
                  "disabled": true
                }
              ]
            },
            "description": "üìù **All Reviews for Agent:**\n\n- Paginated list\n- Filter by rating (1-5)\n- Sorted by most recent\n- Includes:\n  - Rating (1-5 stars)\n  - Customer feedback text\n  - Ticket number & subject\n  - Customer name\n  - Date rated"
          },
          "response": []
        },
        {
          "name": "Get Agent Reviews - 5 Stars Only",
          "id": "1cfadc6f-bd0e-4e56-b44e-444610680273",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/{{agent_id}}/reviews?rating=5&limit=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "{{agent_id}}",
                "reviews"
              ],
              "query": [
                {
                  "key": "rating",
                  "value": "5"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Filter to show only 5-star reviews"
          },
          "response": []
        },
        {
          "name": "Agent Leaderboard - By Rating",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üèÜ Agent Leaderboard (by rating):');",
                  "    response.leaderboard.forEach((agent, i) => {",
                  "        console.log(`${i+1}. ${agent.firstName} ${agent.lastName}: ${agent.averageRating}‚≠ê (${agent.totalRatings} ratings)`);",
                  "    });",
                  "}"
                ],
                "type": "text/javascript",
                "id": "d2d0f6d9-c368-47b8-95fd-bc6c740eb1f0"
              }
            }
          ],
          "id": "bc34c660-b2e7-4ab0-8fa3-d51e059b9274",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/leaderboard?period=month&metric=rating",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "leaderboard"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "month",
                  "description": "all, today, week, month"
                },
                {
                  "key": "metric",
                  "value": "rating",
                  "description": "rating, resolved, response, total"
                }
              ]
            },
            "description": "üèÜ **Performance Leaderboard**\n\n**Sort by:**\n- rating: Average rating (best rated agents)\n- resolved: Most tickets resolved\n- response: Fastest response time\n- total: Most tickets handled\n\n**Period:**\n- all: All time\n- today: Last 24 hours\n- week: Last 7 days\n- month: Last 30 days"
          },
          "response": []
        },
        {
          "name": "Agent Leaderboard - By Resolved Tickets",
          "id": "6e4b77c3-0cde-4139-ae42-43b17c3ebd75",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/leaderboard?period=week&metric=resolved",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "leaderboard"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "week"
                },
                {
                  "key": "metric",
                  "value": "resolved"
                }
              ]
            },
            "description": "Most productive agents this week"
          },
          "response": []
        },
        {
          "name": "Agent Leaderboard - By Response Time",
          "id": "5761bafe-f779-48b7-a13f-ef0871a8d25d",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/support/admin/agents/leaderboard?period=all&metric=response",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "support",
                "admin",
                "agents",
                "leaderboard"
              ],
              "query": [
                {
                  "key": "period",
                  "value": "all"
                },
                {
                  "key": "metric",
                  "value": "response"
                }
              ]
            },
            "description": "Fastest responding agents"
          },
          "response": []
        }
      ],
      "id": "99faacd3-b504-497d-8ccc-6fdcd1261fd8",
      "description": "Agent profiles, ratings, reviews, and leaderboard"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// Pre-request script placeholder"
        ],
        "type": "text/javascript",
        "id": "a1dc5b9e-5b26-4bf4-9c13-f3d7b5cc4647"
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// Tests placeholder"
        ],
        "type": "text/javascript",
        "id": "3aa77e7c-ec2c-429e-a794-25f78b092d66"
      }
    }
  ],
  "variable": [
    {
      "id": "81966cb7-5786-4aab-a71e-582b128cb3a7",
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "id": "a4791b9e-ef9d-4561-b011-508e98f167c2",
      "key": "job_id",
      "value": ""
    },
    {
      "id": "ca71185e-746a-4967-a92b-b911ed696878",
      "key": "auth_token",
      "value": "",
      "type": "default"
    },
    {
      "id": "a9f05f90-11d5-4179-a222-d2a317f6e033",
      "key": "analysis_id",
      "value": ""
    },
    {
      "id": "df4ce925-32a3-4ad2-aa67-0c53260dacfd",
      "key": "application_id",
      "value": ""
    },
    {
      "id": "969cc7c8-2e0d-487e-87c3-926445a232c8",
      "key": "ticket_id",
      "value": ""
    }
  ]
}